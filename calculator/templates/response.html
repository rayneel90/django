{% extends "base.html" %}

{% load staticfiles %}


{% block stylesheets %} <link rel="stylesheet" href="{% static 'css/calculator.css' %}" > {% endblock %}

{% block content %}
<main role="main">
  <div class="row p-4">
    <div class="col-lg-4 col-md-6  col-sm-10 ">
    <div class=" card ">
      <h5 class="card-header"> Enter Loan Details</h5>
      <ul class="nav nav-tabs nav-justified">
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#TL">Term Loans</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#ODCC">OD / CC</a>
        </li>
      </ul>
      <div class="tab-content">
        <div id="TL" class="tab-pane  bg mb-0">
          <div class='bg p-3'>
            <form method = 'POST'>
              {% csrf_token %}
              <input hidden value="TL" name="typ">
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="basic">
                    <h5 class="m-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#collapseZero"
                              aria-expanded="true" aria-controls="collapseOne" type="button">
                        Basic Loan Details
                      </button>
                    </h5>
                  </div>
                  <div id="collapseZero" class="collapse show" aria-labelledby="headingOne">
                    <div class="card-body">
                      <div class="form-group">
                        <label class="font-weight-bold" for="Appl">Application Number</label>
                        <input id="Appl" type="text" required class="form-control" name="ApplNo">
                      </div>
                      <div class="row">
                        <div class="col-sm-8">
                          <div class="form-group">
                            <label class="font-weight-bold" for="RMname">RM's Name</label>
                            <input id="RMname" type="text" required class="form-control" name="RMName">
                          </div>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="font-weight-bold" for="HRMS">HRMS No</label>
                            <input id="HRMS" type="text" required class="form-control" name="HRMS">
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="font-weight-bold" for="Product">Product</label>
                        <select class="custom-select" id="Product" name="product" required>
                          <option hidden disabled selected value> -- select an option -- </option>
                          <option value="HL">Home Loan</option>
                          <option value="LAP">Loan Against Property</option>
                          <option value="CV">Commercial Vehicle Loan</option>
                          <option value="SME">SME Loans</option>
                          <option value="Tractor">Tractor Loan</option>
                        </select>
                      </div><!-- Product -->
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="basic">
                    <h5 class="m-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne"
                              aria-expanded="true" aria-controls="collapseOne" type="button">
                        Financial Details
                      </button>
                    </h5>
                  </div>
                  <div id="collapseOne" class="collapse" aria-labelledby="headingOne">
                    <div class="card-body">
                      <div class="form-group">
                        <label class="font-weight-bold" for="LTV">LTV</label>
                        <div class="input-group mb-3">
                          <input type="number" step="0.1" class="form-control" id = "LTV" name="ltv">
                          <div class="input-group-append">
                            <span class="input-group-text">%</span>
                          </div>
                        </div>
                      </div><!-- LTV-->
                      <div class='row'>
                        <div class='col-sm-7'>
                          <div class="form-group">
                            <label class="font-weight-bold" for="Principal">Loan Amount</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "Principal" name="sanction_amt" required>
                            </div>
                          </div><!-- Principal-->
                        </div>
                        <div class='col-sm-5'>
                          <div class="form-group">
                            <label class="font-weight-bold" for="ROI">Rate of Interest</label>
                            <div class="input-group mb-3">
                              <input type="number" step="0.01" class="form-control" id = "ROI" name="roi" required>
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- ROI-->
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                             <label class="font-weight-bold" for="Tenure">Tenure</label>
                             <div class="input-group mb-3">
                               <input type="number" class="form-control" id = "Tenure" name="tenure" required>
                               <div class="input-group-append">
                                 <span class="input-group-text">months</span>
                               </div>
                             </div>
                           </div><!-- Tenure -->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="Rating">Rating</label>
                            <select class="custom-select" id="Rating" name="rating" >
                              <option hidden disabled selected value> -- select -- </option>
                              <option value="AAA">AAA</option>
                              <option value="AA">AA</option>
                              <option value="A">A</option>
                              <option value="BBB">BBB</option>
                              <option value="BB">BB</option>
                              <option value="U">Unrated</option>
                              <option value="CM">Capital Market</option>
                              <option value="CRE">CRE</option>
                              <option value="CRE_RH">CRE-RH</option>
                              <option value="RRE">RRE</option>
                              <option value="RRP">RRP</option>
                            </select>
                          </div><!-- Rating-->
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="headingTwo">
                    <h5 class="mb-0">
                      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Fees and Incomes
                      </button>
                    </h5>
                  </div>
                  <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="processing">Processing Fee</label>
                            <div class="input-group mb-3">
                              <input type="number" step=".1" class="form-control" id = "processing" name="profee">
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- Processing Fee-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="connector">Connector Payout</label>
                            <div class="input-group mb-3">
                              <input type="number" step="0.01"  class="form-control" id = "connector" name="conpay">
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- Connector Payout-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="insurance">Insurance Premium</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "insurance" name="insur">
                            </div>
                          </div><!-- Insurance-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="other">Other Income</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "other" name="other">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="1" name = 'recurr' id="defaultCheck1">
                                <label class="form-check-label" for="defaultCheck1">
                                  Recurring Income
                                </label>
                              </div>
                            </div>
                          </div><!-- Other income-->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="headingThree">
                    <h5 class="mb-0">
                      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree"
                              aria-expanded="false" aria-controls="collapseThree">
                        PSL Status
                      </button>
                    </h5>
                  </div>
                  <div id="collapseThree" class="collapse" aria-labelledby="headingThree" >
                    <div class="card-body">
                      <h6 class="card-title">
                        Check all that are applicable
                      </h6>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="psl" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            Priority Sector Lending
                          </span>
                        </label>
                      </fieldset>
                      </div>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="agri_psl" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            Agri Priority Sector Lending
                          </span>
                        </label>
                      </fieldset>
                      </div>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="rrp" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            RRP
                          </span>
                        </label>
                      </fieldset>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <input type="submit" value="Submit" class="btn btn-primary btn-block">
                </div>
            </form>
          </div>
        </div>
        <div id="ODCC" class="tab-pane bg mb-0" >
            <div class='bg p-3'>
            <form method = 'POST'>
              {% csrf_token %}
                <input hidden value="ODCC" name="typ">
                <div class="card mx-3 mx-3 border-0">
                  <div class="card-header p-0" id="basic">
                    <h5 class="m-0">
                      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseZero"
                              aria-expanded="true" aria-controls="collapseOne">
                        Basic Loan Details
                      </button>
                    </h5>
                  </div>
                  <div id="collapseZero" class="collapse show" aria-labelledby="headingOne">
                    <div class="card-body">
                      <div class="form-group">
                        <label class="font-weight-bold" for="Appl">Application Number</label>
                        <input id="Appl" type="text" required class="form-control" name="ApplNo">
                      </div>
                      <div class="row">
                        <div class="col-sm-8">
                          <div class="form-group">
                            <label class="font-weight-bold" for="RMname">RM's Name</label>
                            <input id="RMname" type="text" required class="form-control" name="RMName">
                          </div>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="font-weight-bold" for="HRMS">HRMS No</label>
                            <input id="HRMS" type="text" required class="form-control" name="HRMS">
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="font-weight-bold" for="Product">Product</label>
                        <select class="custom-select" id="Product" name="product" required>
                          <option hidden disabled selected value> -- select an option -- </option>
                          <option value="HL">Home Loan</option>
                          <option value="LAP">Loan Against Property</option>
                          <option value="CV">Commercial Vehicle Loan</option>
                          <option value="SME">SME Loans</option>
                          <option value="Tractor">Tractor Loan</option>
                        </select>
                      </div><!-- Product -->
                    </div>
                  </div>
                </div>
                <div class="card mx-3 mx-3 border-0">
                  <div class="card-header p-0" id="basic">
                    <h5 class="m-0">
                      <button class="btn btn-link" data-toggle="collapse"  type="button" data-target="#collapseOne"
                              aria-expanded="true" aria-controls="collapseOne">
                        Financial Details
                      </button>
                    </h5>
                  </div>
                  <div id="collapseOne" class="collapse" aria-labelledby="headingOne">
                    <div class="card-body">
                      <div class="form-group">
                        <label class="font-weight-bold" for="LTV">LTV</label>
                        <div class="input-group mb-3">
                          <input type="number" step="0.1" class="form-control" id = "LTV" name="ltv">
                          <div class="input-group-append">
                            <span class="input-group-text">%</span>
                          </div>
                        </div>
                      </div><!-- LTV-->
                      <div class='row'>
                        <div class='col-sm-7'>
                          <div class="form-group">
                            <label class="font-weight-bold" for="Principal">Loan Amount</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "Principal" name="principal" required>
                            </div>
                          </div><!-- Principal-->
                        </div>
                        <div class='col-sm-5'>
                          <div class="form-group">
                            <label class="font-weight-bold" for="ROI">Rate of Interest</label>
                            <div class="input-group mb-3">
                              <input type="number" step="0.01" class="form-control" id = "ROI" name="roi" required>
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- ROI-->
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                             <label class="font-weight-bold" for="utilisation">Utilisation</label>
                             <div class="input-group mb-3">
                               <input type="number" class="form-control" setp=0.1 id = "utilisation" name="utlisation" required>
                               <div class="input-group-append">
                                 <span class="input-group-text">%</span>
                               </div>
                             </div>
                           </div><!-- Utilisation -->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="Rating">Rating</label>
                            <select class="custom-select" id="Rating" name="rating">
                              <option hidden disabled selected value> -- select -- </option>
                              <option value="AAA">AAA</option>
                              <option value="AA">AA</option>
                              <option value="A">A</option>
                              <option value="BBB">BBB</option>
                              <option value="BB">BB</option>
                              <option value="U">Unrated</option>
                              <option value="CM">Capital Market</option>
                              <option value="CRE">CRE</option>
                              <option value="CRE_RH">CRE-RH</option>
                              <option value="RRE">RRE</option>
                              <option value="RRP">RRP</option>
                            </select>
                          </div><!-- Rating-->
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="headingTwo">
                    <h5 class="mb-0">
                      <button class="btn btn-link collapsed"  type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Fees and Incomes
                      </button>
                    </h5>
                  </div>
                  <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="processing">Processing Fee</label>
                            <div class="input-group mb-3">
                              <input type="number" step=".1" class="form-control" id = "processing" name="profee">
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- Processing Fee-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="connector">Connector Payout</label>
                            <div class="input-group mb-3">
                              <input type="number" step="0.01"  class="form-control" id = "connector" name="conpay">
                              <div class="input-group-append">
                                <span class="input-group-text">%</span>
                              </div>
                            </div>
                          </div><!-- Connector Payout-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="insurance">Insurance Premium</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "insurance" name="insur">
                            </div>
                          </div><!-- Insurance-->
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="font-weight-bold" for="insurance">Other Income</label>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text">&#8377</span>
                              </div>
                              <input type="number" class="form-control" id = "insurance" name="insur">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                <label class="form-check-label" for="defaultCheck1">
                                  Recurring Income
                                </label>
                              </div>
                            </div>
                          </div><!-- Other income-->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <div class="card-header p-0" id="headingThree">
                    <h5 class="mb-0">
                      <button class="btn btn-link collapsed"  type="button" data-toggle="collapse" data-target="#collapseThree"
                              aria-expanded="false" aria-controls="collapseThree">
                        PSL Status
                      </button>
                    </h5>
                  </div>
                  <div id="collapseThree" class="collapse" aria-labelledby="headingThree" >
                    <div class="card-body">
                      <h6 class="card-title">
                        Check all that are applicable
                      </h6>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="psl" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            Priority Sector Lending
                          </span>
                        </label>
                      </fieldset>
                      </div>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="agri_psl" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            Agri Priority Sector Lending
                          </span>
                        </label>
                      </fieldset>
                      </div>
                      <div class="m-2">
                        <fieldset class="toggle-check large verbal" tabindex="0">
                        <label>
                          <input name="rrp" type="checkbox" value=1>
                          <span data-on="Yes" data-off="No">
                            RRP
                          </span>
                        </label>
                      </fieldset>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mx-3 my-1 border-0">
                  <input type="submit" value="Submit" class="btn btn-primary btn-block">
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div class="col-lg-8 ">
                <div class="row mx-1">
                    <div class="card text-center col-md-6">
                        <h5 class="card-header">
                            Cumulative Profit/Loss
                        </h5>
                        &#8377 {{total_profit}}
                    </div>
                    <div class="card text-center col-md-6">
                    <h5 class="card-header">
                        Lifetime ROE
                    </h5>
                    {{net_roe}}%
                </div>
                </div>
                <div class="row card my-5 mx-3">
                    <h5 class="card-header">
                        Profitability Chart
                    </h5>
                    <div class="table-responsive">
                    {{details|safe}}
                    </div>
                </div>
            </div>
  </div>
</main>
{% endblock %}